<!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Page 7 | BY DevOps | 今晚打老虎</title>
  <meta name="author" content="林文杰">
  
  <meta name="description" content="DevOps 技术运维小学生">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="BY DevOps | 今晚打老虎">

  
    <meta property="og:image" content="undefined">
  

  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



</head>
</html>
 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">BY DevOps | 今晚打老虎</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header">
  <h1>记录Linux的点点滴滴（DevOps技术运维小学生）</h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <i class="fa fa-heart"></i>
      Welcome to my blog.
</div>    

		<div class="mypage">
		
		<!-- title and entry -->
		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-01-23 </div>
			<div class="article-title"><a href="/2016/01/23/NGINX╥■▓╪░ц▒╛║┼/">NGINX隐藏版本号</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <p>adminuser@ubuntu:/usr/local/nginx/nginx/sbin$ curl -I 192.168.1.230<br>HTTP/1.1 200 OK<br>Server: openresty/1.7.0.1<br>Date: Wed, 20 Jan 2016 01:34:05 GMT<br>Content-Type: text/html<br>Content-Length: 612<br>Last-Modified: Fri, 15 Jan 2016 03:50:32 GMT<br>Connection: keep-alive<br>ETag: “56986c88-264”<br>Accept-Ranges: bytes</p>
<blockquote>
<p>隐藏版本号：</p>
</blockquote>
<p>adminuser@ubuntu:/usr/local/nginx/nginx/conf$ sudo vim nginx.conf</p>
<p>http<br>{<br>server_tokens off;  新增这个隐藏版本号<br>}</p>
<blockquote>
<p>更改后reload之后，测试：</p>
</blockquote>
<p>adminuser@ubuntu:/usr/local/nginx/nginx/sbin$ curl -I 192.168.1.230<br>HTTP/1.1 200 OK<br>Server: openresty<br>Date: Wed, 20 Jan 2016 01:44:02 GMT<br>Content-Type: text/html<br>Content-Length: 612<br>Last-Modified: Fri, 15 Jan 2016 03:50:32 GMT<br>Connection: keep-alive<br>ETag: “56986c88-264”<br>Accept-Ranges: bytes</p>

	
	</div>
	
  
</div>
	<a type="button" href="/2016/01/23/NGINX╥■▓╪░ц▒╛║┼/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-01-05 </div>
			<div class="article-title"><a href="/2016/01/05/centos░▓╫░glusterfs/">centos安装glusterfs和实战</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <p>刚过元旦，由于最近比较忙，还木有时间给各位小伙伴们拜年，在此祝各位小伙伴们新年新气象，在新的一年内财源广进，身体健康。</p>
<blockquote>
<p>什么是分布式文件系统：</p>
<p>分布式文件系统（Distributed File System）是指文件系统管理的物理存储资源不一定直接连接在本地节点上，而是通过计算机网络与节点相连。分布式文件系统的设计基于客户机/服务器模 式。一个典型的网络可能包括多个供多用户访问的服务器。另外，对等特性允许一些系统扮演客户机和服务器的双重角色。例如，用户可以“发表”一个允许其他客 户机访问的目录，一旦被访问，这个目录对客户机来说就像使用本地驱动器一样。</p>
</blockquote>
<p><strong>分区磁盘</strong><br>[root@localhost src]# fdisk -l<br>[root@localhost src]# mkfs.etx4  /dev/sdb</p>
<p><strong>1、下载glusterfs源码包到/usr/local/urc</strong><br><a href="http://www.gluster.org/download/" target="_blank" rel="noopener">http://www.gluster.org/download/</a></p>
<p><strong>2、解压</strong><br>[root@localhost src]# tar zvxf glusterfs-3.6.6.tar.gz </p>
<p><strong>3、编译安装</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost glusterfs<span class="number">-3.6</span><span class="number">.6</span>]<span class="comment"># ./configure   --prefix=/usr/local/glusterfs -enable-systemt</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment"># 如果出现下面错误</span></span><br><span class="line">checking <span class="keyword">for</span> flex... no</span><br><span class="line">checking <span class="keyword">for</span> lex... no</span><br><span class="line">configure: error: Flex <span class="keyword">or</span> lex required to build glusterfs.</span><br><span class="line">解决方法 [root@localhost glusterfs<span class="number">-3.6</span><span class="number">.6</span>]<span class="comment"># yum -y install flex</span></span><br><span class="line"><span class="comment"># 如果出现下面错误</span></span><br><span class="line">configure: error: GNU Bison required to build glusterfs.</span><br><span class="line">解决方法 [root@localhost glusterfs<span class="number">-3.6</span><span class="number">.6</span>]<span class="comment"># yum -y install bison</span></span><br><span class="line"><span class="comment"># 如果出现下面错误</span></span><br><span class="line">configure: error: OpenSSL crypto library <span class="keyword">is</span> required to build glusterfs</span><br><span class="line">解决方法 [root@localhost glusterfs<span class="number">-3.6</span><span class="number">.6</span>]<span class="comment"># yum -y install openssl-devel</span></span><br><span class="line"></span><br><span class="line">configure: error: libxml2 devel libraries <span class="keyword">not</span> found</span><br><span class="line">解决方法：[root@localhost glusterfs<span class="number">-3.6</span><span class="number">.6</span>]<span class="comment"># yum install libxml2 libxml2-devel</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[root@localhost glusterfs<span class="number">-3.6</span><span class="number">.6</span>]<span class="comment">#make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure></p>
<p><strong>4、查看版本信息</strong><br>[root@localhost sbin]# ./gluster –version<br>glusterfs 3.6.6 built on Dec 27 2015 03:48:07<br>Repository revision: git://git.gluster.com/glusterfs.git<br>Copyright (c) 2006-2011 Gluster Inc. <a href="http://www.gluster.com" target="_blank" rel="noopener">http://www.gluster.com</a><br>GlusterFS comes with ABSOLUTELY NO WARRANTY.<br>You may redistribute copies of GlusterFS under the terms of the GNU General Public License.</p>
<p><strong>5、glusterfs 启动</strong><br>[root@localhost sbin]#  service glusterd start<br>Starting glusterd:                                         [确定]</p>
<p>[root@localhost sbin]# ps -ef |grep glusterd<br>root      49226      1  0 03:56 ?        00:00:00 /usr/local/glusterfs/sbin/glusterd –pid-file=/var/run/glusterd.pid<br>root      49363   6751  0 03:57 pts/2    00:00:00 grep glusterd</p>
<p><strong>6、gluster基本操作</strong><br>6.1、创建并启动volume<br>[root@localhost sbin]# ./gluster volume create help<br>Usage: volume create <new-volname> [stripe <count>] [replica <count>] [disperse [<count>]] [redundancy <count>] [transport <tcp|rdma|tcp,rdma>] <new-brick>… [force]<br>[root@localhost sbin]# ./gluster volume create  testvol 192.168.108.141:/data/brick1 192.168.108.141:/data/brick2<br>volume create: testvol: failed: The brick 192.168.108.141:/data/brick1 is being created in the root partition. It is recommended that you don’t use the system’s root partition for storage backend. Or use ‘force’ at the end of the command if you want to override this behavior.<br>提示：建议您不使用系统的根分区来存储后端。或使用“强制”命令结束时，如果你想重写此行为。<br>[root@localhost sbin]# ./gluster volume create  testvol 192.168.108.141:/data/brick1 192.168.108.141:/data/brick2 force<br>volume create: testvol: success: please start the volume to access data<br>[root@localhost sbin]# ./gluster volume info<br>Volume Name: testvol<br>Type: Distribute<br>Volume ID: 1b1c1b4d-cd7e-4770-beb4-8dfa1499d723<br>Status: Created<br>Number of Bricks: 2<br>Transport-type: tcp<br>Bricks:<br>Brick1: 192.168.108.141:/data/brick1<br>Brick2: 192.168.108.141:/data/brick2</new-brick></tcp|rdma|tcp,rdma></count></count></count></count></new-volname></p>
<p>[root@localhost sbin]# ./gluster volume start testvol   —testvol 是指创建volume的名字<br>volume start: testvol: success<br>[root@localhost sbin]# ./gluster volume info</p>
<p>Volume Name: testvol<br>Type: Distribute<br>Volume ID: 1b1c1b4d-cd7e-4770-beb4-8dfa1499d723<br>Status: Started<br>Number of Bricks: 2<br>Transport-type: tcp<br>Bricks:<br>Brick1: 192.168.108.141:/data/brick1<br>Brick2: 192.168.108.141:/data/brick2</p>
<p>[root@localhost sbin]# mount -t glusterfs 192.168.108.141:/testvol /mnt<br>[root@localhost sbin]# mount<br>/dev/mapper/VolGroup-lv_root on / type ext4 (rw)<br>proc on /proc type proc (rw)<br>sysfs on /sys type sysfs (rw)<br>devpts on /dev/pts type devpts (rw,gid=5,mode=620)<br>tmpfs on /dev/shm type tmpfs (rw)<br>/dev/sda1 on /boot type ext4 (rw)<br>none on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)<br>gvfs-fuse-daemon on /root/.gvfs type fuse.gvfs-fuse-daemon (rw,nosuid,nodev)<br>/dev/sr0 on /media/CentOS_6.5_Final type iso9660 (ro,nosuid,nodev,uhelper=udisks,uid=0,gid=0,iocharset=utf8,mode=0400,dmode=0500)<br>192.168.108.141:/testvol on /mnt type fuse.glusterfs (rw,default_permissions,allow_other,max_read=131072)<br>[root@localhost sbin]# df -h<br>Filesystem                    Size  Used Avail Use% Mounted on<br>/dev/mapper/VolGroup-lv_root   18G  8.0G  8.6G  49% /<br>tmpfs                         491M  228K  491M   1% /dev/shm<br>/dev/sda1                     485M   35M  426M   8% /boot<br>/dev/sr0                      4.2G  4.2G     0 100% /media/CentOS_6.5_Final<br>192.168.108.141:/testvol       35G   16G   18G  49% /mnt</p>
<p>[root@localhost /]# cd /mnt/<br>[root@localhost mnt]# touch file.{1..10}<br>[root@localhost mnt]# ll<br>总用量 8<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.1<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.10<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.2<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.3<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.4<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.5<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.6<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.7<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.8<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.9</p>
<p>drwxr-xr-x 2 root root 8192 12月 27 22:53 test11[root@localhost /]# cd /mnt/<br>[root@localhost mnt]# ll<br>总用量 8<br>drwxr-xr-x 2 root root 8192 12月 27 22:53 test11<br>[root@localhost mnt]# touch file.{1..10}<br>[root@localhost mnt]# ll<br>总用量 8<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.1<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.10<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.2<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.3<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.4<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.5<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.6<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.7<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.8<br>-rw-r–r– 1 root root    0 12月 27 23:05 file.9<br>drwxr-xr-x 2 root root 8192 12月 27 22:53 test11<br>[root@localhost /]# ll /data/brick1/<br>总用量 4<br>-rw-r–r– 2 root root    0 12月 27 23:05 file.6<br>-rw-r–r– 2 root root    0 12月 27 23:05 file.7<br>-rw-r–r– 2 root root    0 12月 27 23:05 file.8<br>drwxr-xr-x 2 root root 4096 12月 27 22:53 test11<br>[root@localhost /]# ll /data/brick2/<br>总用量 4<br>-rw-r–r– 2 root root    0 12月 27 23:05 file.1<br>-rw-r–r– 2 root root    0 12月 27 23:05 file.10<br>-rw-r–r– 2 root root    0 12月 27 23:05 file.2<br>-rw-r–r– 2 root root    0 12月 27 23:05 file.3<br>-rw-r–r– 2 root root    0 12月 27 23:05 file.4<br>-rw-r–r– 2 root root    0 12月 27 23:05 file.5<br>-rw-r–r– 2 root root    0 12月 27 23:05 file.9<br>drwxr-xr-x 2 root root 4096 12月 27 22:53 test11<br>提示：当我们创建了testvol时候，在挂载点上创建11个文件，自动分配给两个节点。<br><strong>分配4个节点实战：</strong><br>[root@localhost /]# /usr/local/glusterfs/sbin/gluster  volume create testvol2 192.168.108.141:/data/brick3 192.168.108.141:/data/brick4 192.168.108.141:/data/brick5 192.168.108.141:/data/brick6 force<br>volume create: testvol2: success: please start the volume to access data<br>[root@localhost data]# /usr/local/glusterfs/sbin/gluster  volume info</p>
<p>Volume Name: testvol<br>Type: Distribute<br>Volume ID: 1b1c1b4d-cd7e-4770-beb4-8dfa1499d723<br>Status: Started<br>Number of Bricks: 2<br>Transport-type: tcp<br>Bricks:<br>Brick1: 192.168.108.141:/data/brick1<br>Brick2: 192.168.108.141:/data/brick2</p>
<p>Volume Name: testvol2<br>Type: Distribute<br>Volume ID: 1aa17053-51d7-4d9d-bb5f-3b6ed4ddc559<br>Status: Created<br>Number of Bricks: 4<br>Transport-type: tcp<br>Bricks:<br>Brick1: 192.168.108.141:/data/brick3<br>Brick2: 192.168.108.141:/data/brick4<br>Brick3: 192.168.108.141:/data/brick5<br>Brick4: 192.168.108.141:/data/brick6<br>[root@localhost data]# /usr/local/glusterfs/sbin/gluster  volume stop  testvol2  –停止testvol2卷<br>Stopping volume will make its data inaccessible. Do you want to continue? (y/n) y<br>volume stop: testvol2: failed: Volume testvol2 is not in the started state<br>[root@localhost data]# /usr/local/glusterfs/sbin/gluster  volume delete  testvol2   –删除testvol2卷<br>Deleting volume will erase all information about the volume. Do you want to continue? (y/n) y<br>volume delete: testvol2: success<br>[root@localhost data]# /usr/local/glusterfs/sbin/gluster  volume info</p>
<p>Volume Name: testvol<br>Type: Distribute<br>Volume ID: 1b1c1b4d-cd7e-4770-beb4-8dfa1499d723<br>Status: Started<br>Number of Bricks: 2<br>Transport-type: tcp<br>Bricks:<br>Brick1: 192.168.108.141:/data/brick1<br>Brick2: 192.168.108.141:/data/brick2</p>
<p>[root@localhost data]# /usr/local/glusterfs/sbin/gluster  volume create  test2vol replica 2  192.168.108.141:/data/brick3 192.168.108.141:/data/brick4 192.168.108.141:/data/brick5 192.168.108.141:/data/brick6 force<br>Multiple bricks of a replicate volume are present on the same server. This setup is not optimal.<br>Do you still want to continue creating the volume?  (y/n) y<br>volume create: test2vol: success: please start the volume to access data</p>
<p>[root@localhost data]# /usr/local/glusterfs/sbin/gluster  volume info</p>
<p>Volume Name: test2vol<br>Type: Distributed-Replicate<br>Volume ID: 581ca5a1-2651-47cc-a35f-0a018b164871<br>Status: Created<br>Number of Bricks: 2 x 2 = 4<br>Transport-type: tcp<br>Bricks:<br>Brick1: 192.168.108.141:/data/brick3<br>Brick2: 192.168.108.141:/data/brick4<br>Brick3: 192.168.108.141:/data/brick5<br>Brick4: 192.168.108.141:/data/brick6</p>
<p>Volume Name: testvol<br>Type: Distribute<br>Volume ID: 1b1c1b4d-cd7e-4770-beb4-8dfa1499d723<br>Status: Started<br>Number of Bricks: 2<br>Transport-type: tcp<br>Bricks:<br>Brick1: 192.168.108.141:/data/brick1<br>Brick2: 192.168.108.141:/data/brick2</p>
<p>[root@localhost data]# mount -t glusterfs  192.168.108.141:/test2vol /mnt/test2vol/    –挂载test2vol卷<br>Mount failed. Please check the log file for more details.<br>[root@localhost data]# df -h                                                                                                       –由于卷没有启动，所以挂载失败<br>Filesystem                    Size  Used Avail Use% Mounted on<br>/dev/mapper/VolGroup-lv_root   18G  7.9G  8.6G  48% /<br>tmpfs                         491M  224K  491M   1% /dev/shm<br>/dev/sda1                     485M   35M  426M   8% /boot<br>192.168.108.141:/testvol       35G   16G   18G  48% /mnt<br>[root@localhost data]# /usr/local/glusterfs/sbin/gluster  volume  start test2vol<br>volume start: test2vol: success<br>[root@localhost data]# mount -t glusterfs  192.168.108.141:/test2vol /mnt/test2vol/<br>[root@localhost data]# df -h<br>Filesystem                    Size  Used Avail Use% Mounted on<br>/dev/mapper/VolGroup-lv_root   18G  7.9G  8.6G  48% /<br>tmpfs                         491M  224K  491M   1% /dev/shm<br>/dev/sda1                     485M   35M  426M   8% /boot<br>192.168.108.141:/testvol       35G   16G   18G  48% /mnt<br>192.168.108.141:/test2vol      35G   16G   18G  48% /mnt/test2vol</p>
<p>[root@localhost data]# cd /mnt/test2vol/<br>[root@localhost test2vol]# ll<br>总用量 0<br>[root@localhost test2vol]# touch file.{20..30}<br>[root@localhost test2vol]# ll<br>总用量 0<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.20<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.21<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.22<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.23<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.24<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.25<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.26<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.27<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.28<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.29<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.30<br>[root@localhost test2vol]# ll /data/brick<br>brick1/ brick2/ brick3/ brick4/ brick5/ brick6/<br>[root@localhost test2vol]# ll /data/brick3/<br>总用量 0<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.20<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.21<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.22<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.28<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.30<br>[root@localhost test2vol]# ll /data/brick4<br>总用量 0<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.20<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.21<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.22<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.28<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.30<br>[root@localhost test2vol]# ll /data/brick5<br>总用量 0<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.23<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.24<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.25<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.26<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.27<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.29<br>[root@localhost test2vol]# ll /data/brick6<br>总用量 0<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.23<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.24<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.25<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.26<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.27<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.29<br>由上可以得出：当写入数据时候、数据结构是以下图：</p>
<p>把节点3的数据删除，能不能恢复：</p>
<p>[root@localhost test2vol]# ll /data/brick3<br>总用量 0<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.20<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.21<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.22<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.28<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.30<br>[root@localhost test2vol]# rm -rf /data/brick3/*<br>[root@localhost test2vol]# ll /data/brick3<br>总用量 0<br>[root@localhost test2vol]# ll /mnt/test2vol<br>总用量 0<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.20<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.21<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.22<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.23<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.24<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.25<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.26<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.27<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.28<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.29<br>-rw-r–r– 1 root root 0 12月 27 23:29 file.30</p>
<p>当节点3数据掉失后，卷数据显示还是正常的。</p>
<p>均衡下：</p>
<p>[root@localhost test2vol]# /usr/local/glusterfs/sbin/gluster volume rebalance test2vol start<br>volume rebalance: test2vol: success: Initiated rebalance on volume test2vol.<br>Execute “gluster volume rebalance <volume-name> status” to check status.<br>ID: adb5c963-10a5-463c-adac-f6a4f0b3ce5e</volume-name></p>
<p>[root@localhost test2vol]# ll /data/brick3   –数据已经恢复<br>总用量 0<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.20<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.21<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.22<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.28<br>-rw-r–r– 2 root root 0 12月 27 23:29 file.30</p>

	
	</div>
	
  
</div>
	<a type="button" href="/2016/01/05/centos░▓╫░glusterfs/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-01-05 </div>
			<div class="article-title"><a href="/2016/01/05/╗∙╙┌-memcached-╡─-tomcat-╝п╚║╓о-session-╣▓╧э/">基于 memcached 的 tomcat 集群之 session 共享</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <blockquote>
<p>Memcached 是一个高性能的分布式内存对象缓存系统，用于动态 Web  应用以减轻数据库负载。它通过在内存中缓存数据和对象来减少读取数据库的次数，从而提高动态、数据库驱动网站的速度。Memcached 是基于一个存储 key / value 的 hashmap。</p>
</blockquote>
<p><strong>Memcached安装</strong><br>安装环境</p>
<p>CentOS 6.5<br>libevent-2.0.22-stable.tar.gz<br>memcached-1.4.24.tar.gz</p>
<p>安装 libevent</p>
<p>memcached 依赖 libevent 库，检查 libevent 是否已安装<br>[root@localhost ~]## rpm -qa | grep libevent<br>到 libevent 官网下载所需版本的安装文件<br>[root@localhost ~]# tar zxvf libevent-2.0.22-stable.tar.gz<br>[root@localhost ~]# cd libevent-2.0.22-stable<br>[root@localhost libevent-2.0.22-stable]# ./configure –prefix=/usr/local/libevent<br>[root@localhost ~]# make<br>[root@localhost ~]# make install</p>
<p>安装 memcached</p>
<p>到 memcached 官网下载所需版本的安装文件<br>[root@localhost ~]# tar zxvf memcached-1.4.24.tar.gz<br>[root@localhost memcached-1.4.24]# cd memcached-1.4.24<br>[root@localhost memcached-1.4.24]# ./configure –prefix=/usr/local/memcached –with-libevent=/usr/local/libevent/<br>[root@localhost memcached-1.4.24]# make<br>[root@localhost memcached-1.4.24]# make install</p>
<p>启动 memcached</p>
<p>[root@localhost memcached-1.4.24]# /usr/local/memcached/bin/memcached -d -m 128 -u root -p 11211 -c 1024 –P /tmp/memcached.pid<br>启动参数    描述<br>-d    启动一个守护进程<br>-m    分配给 memcached 的内存大小，单位 MB<br>-u    启动 memcached 的用户<br>-c    最大运行的并发连接数<br>-p    设置 memcached 监听的端口<br>-P    设置保存 memcached 的 pid 文件</p>
<p>查看 memcached</p>
<p>[root@localhost memcached-1.4.24]# ps -ef | grep memcached</p>
<p>关闭 memcached</p>
<p>[root@localhost memcached-1.4.24]# ps -ef | grep memcached</p>
<p>root  92911009:09 ?  00:00:00 /usr/local/memcached/bin/memcached -d -m 128 -u root -p 11211 -c 1024 –P /tmp/memcached.pid</p>
<p>[root@localhost memcached-1.4.24]# kill -99291</p>
<p>防火墙开启 11211 端口</p>
<p>[root@localhost memcached-1.4.24]# vi /etc/sysconfig/iptables<br>加入如下一行配置<br>-A INPUT -m state –state NEW -m tcp -p tcp –dport 11211 -j ACCEPT<br>重启防火墙服务<br>[root@localhost memcached-1.4.24]# service iptables restart</p>
<p> <strong>基于 memcached 的 tomcat 集群之 session 共享</strong><br>实现在多台服务器之间共享 session 会话中的数据。</p>
<blockquote>
<p>JAR 包<br>asm-4.0.jar<br>kryo-1.04.jar<br>minlog-1.2.jar<br>reflectasm-1.04.jar<br>kryo-serializers-0.10.jar<br>spymemcached-2.8.12.jar<br>couchbase-client-1.1.4.jar<br>msm-kryo-serializer-1.6.4.jar<br>memcached-session-manager-1.6.4.jar<br>memcached-session-manager-tc7-1.6.4.jar</p>
</blockquote>
<ul>
<li><strong>配置</strong></li>
</ul>
<p>将 JAR 包全部放到 $Tomcat/lib 目录下（$Tomcat 表示 Tomcat 安装的根目录，以下同）。<br>编辑 $Tomcat/conf/context.xml 文件，在 <context> 节点下加入如下配置<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Manager className=<span class="string">"de.javakaffee.web.msm.MemcachedBackupSessionManager"</span></span><br><span class="line">         memcachedNodes=<span class="string">"n1:192.168.1.102:11211,n2:192.168.1.103:11211"</span></span><br><span class="line">         sticky=<span class="string">"false"</span></span><br><span class="line">         lockingMode=<span class="string">"auto"</span></span><br><span class="line">         sessionBackupAsync= <span class="string">"false"</span></span><br><span class="line">         sessionBackupTimeout=<span class="string">"300"</span></span><br><span class="line">         requestUriIgnorePattern= <span class="string">".*\.(png|gif|jpg|ico|css|js)$"</span></span><br><span class="line">         transcoderFactoryClass=<span class="string">"de.javakaffee.web.msm.serializer.kryo.KryoTranscoderFactory"</span> /&gt;</span><br></pre></td></tr></table></figure></context></p>
<ul>
<li><strong>memcachedNodes- </strong><br>必须项 </li>
</ul>
<p>配置 memcached 节点。格式：<id>:<host>:<port>，多个节点之间，用空格或英文逗号分隔</port></host></id></p>
<ul>
<li><strong>sticky </strong></li>
</ul>
<p>可选项<br>是否粘性。默认为 true。粘性会话需要保证每个用户的请求都路由到同一台 Tomcat 服务器中。否则，需要设置成非粘性会话。</p>
<ul>
<li><strong>lockingMode</strong></li>
</ul>
<p>可选项<br>用于非粘性会话。默认为 none。<br>可选值    描述<br>none    不锁定 session<br>all    每个请求访问 session 的期间，session 一直被锁定，直到请求结束<br>auto    只锁定写请求的 session，只读请求的 session 不会被锁定<br>uriPattern:<regexp>    通过正则表达式的方式来对请求的 URI 进行匹配，匹配上的会被锁定</regexp></p>
<ul>
<li><strong>sessionBackupAsync </strong></li>
</ul>
<p>可选项<br>设置 session 会话中的数据是否异步同步到 memcached 中，默认为 true。</p>
<ul>
<li><strong>requestUriIgnorePattern </strong></li>
</ul>
<p>可选项<br>设置忽略会话同步的请求的 URI 地址的正则表达式。这应该包含静态资源的请求。</p>
<ul>
<li><strong>failoverNodes </strong></li>
</ul>
<p>可选项<br>memcached 故障转移节点配置。用于粘性会话，非粘性会话不可用。如：<br>failoverNodes=”n1”，含义是告诉 msm 将 session 会话中的数据存储到 memcached 的 n2 节点中，如果 n2 节点宕掉等致使其不能正常提供服务，msm 才会将 session 会话中的数据存储到 memcached 的 n1 节点中。<br>sessionAttributeFilter</p>
<p>可选项<br>配置同步 session 会话数据的属性名称的正则表达式。如果不设置，则将 session 中全部的属性保存到 memcached 中。</p>
<ul>
<li><strong>transcoderFactoryClass </strong></li>
</ul>
<p>可选项<br>配置序列化和反序列化 session 会话中的数据到 memcached 中的编码转换器的工厂类名。<br>默认是 de.javakaffee.web.msm.JavaSerializationTranscoderFactory</p>
<ul>
<li><strong>backupThreadCount</strong></li>
</ul>
<p>可选项<br>用于异步存储 session 会话中的数据到 memcached 中的线程数。（当 sessionBackupAsync=”true” 时，该配置项有效）</p>
<ul>
<li><strong>sessionBackupTimeout</strong></li>
</ul>
<p>可选项<br>备份 session 会话数据所需时间如果大于该值，将导致 session 会话数据同步失败。默认为 100（单位毫秒）</p>
<p>以上由基友整理，博客地址为：<a href="http://fanlychie.github.io" target="_blank" rel="noopener">http://fanlychie.github.io</a></p>

	
	</div>
	
  
</div>
	<a type="button" href="/2016/01/05/╗∙╙┌-memcached-╡─-tomcat-╝п╚║╓о-session-╣▓╧э/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-12-23 </div>
			<div class="article-title"><a href="/2015/12/23/MYSQLl╩¤╛▌┐т╡─SQL╙я╖и/">MYSQLl数据库的SQL语法</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <p><strong>SQL语言分为以下4个部分：</strong><br>（1）数据定义语言（DDL）：DROP、CREATE、ALYER等集中负责数据结构定义与数据库对象定义的语言。<br>（2）数据操作语言（DML）：INSERT、UPDATE、DELETE等语句。<br>（3）数据查询语言（DQL）：SELECT语句。<br>（4）数据控制语言（DCL）：GRANT、REVOKE、COMMIT等是用来设置或者更改数据库用户或角色权限的语句。</p>
<p><strong>初始root密码:</strong><br>[root@localhost ~]# /usr/bin/mysqladmin -u root password ‘new_passwd’<br><strong>mysql更改密码的三种方法：</strong></p>
<p>1、[root@localhost ~]# mysqladmin -uroot -p原密码 password ‘新密码’<br>2、mysql&gt;update mysql.user set password=’linuxunix’ where user=’root’ and host=’localhost’; (明文加密)<br>mysql&gt;update mysql.user set password=password(‘新密码’) where user=’root’ and host=’localhost’;<br>mysql&gt;flush privileges;<br>3、mysql&gt;set password = password(‘linuxunix’)；<br>     mysql&gt; flush privileges;<br><strong>库操作</strong><br>查看mysql字符集：</p>
<p>mysql&gt; show create database zabbix\G;<br><strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong> 1. row <strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong><br>       Database: zabbix<br>Create Database: CREATE DATABASE <code>zabbix</code> /<em>!40100 DEFAULT CHARACTER SET utf8 </em>/<br>1 row in set (0.00 sec)</p>
<p><strong>创建数据库并指定编码:</strong><br>GBK: create database test2 DEFAULT CHARACTER SET gbk COLLATE gbk_chinese_ci;</p>
<p>UTF8: CREATE DATABASE <code>test2</code> DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;<br><strong>查看数据库当前用户、时间、版本等：</strong><br>mysql&gt; select user()<br>    -&gt; ;<br>+—————-+<br>| user()         |<br>+—————-+<br>| root@localhost |<br>+—————-+<br>1 row in set (0.00 sec)<br>mysql&gt; select now();<br>+———————+<br>| now()               |<br>+———————+<br>| 2015-12-11 11:16:44 |<br>+———————+<br>1 row in set (0.02 sec)</p>
<p>mysql&gt; select version();<br>+———–+<br>| version() |<br>+———–+<br>| 5.1.73    |<br>+———–+<br>1 row in set (0.00 sec)<br><strong>查找某些数据库：</strong><br>mysql&gt; show databases like ‘%te%’;<br>+—————–+<br>| Database (%te%) |<br>+—————–+<br>| test            |<br>| test2           |<br>+—————–+<br>2 rows in set (0.00 sec)</p>
<p><strong>删除数据库：</strong><br>mysql&gt; drop database test2;<br>Query OK, 0 rows affected (0.04 sec)</p>
<p>mysql&gt; show databases;<br>+——————–+<br>| Database           |<br>+——————–+<br>| information_schema |<br>| mysql              |<br>| test               |<br>| zabbix             |<br>+——————–+<br>4 rows in set (0.00 sec)</p>
<p><strong>查看数据库包含的表信息：</strong><br>mysql&gt; use zabbix<br>Reading table information for completion of table and column names<br>You can turn off this feature to get a quicker startup with -A</p>
<p>Database changed<br>mysql&gt;<br>mysql&gt; show tables;<br>+———————–+<br>| Tables_in_zabbix      |<br>+———————–+<br>| acknowledges          |<br>| actions               |<br>| alerts                |<br>| application_template  |<br>| valuemaps             |<br>+———————–+<br>104 rows in set (0.00 sec)</p>
<p><strong>删除Mysql系统的多余账号:</strong><br>语法：dorp user ‘用户名’@’主机域’;<br>mysql&gt; drop user ‘zabbix’@’localhost’;<br>Query OK, 0 rows affected (0.00 sec)<br>注意：如果drop删除不了(一般是特殊字符或者大写)，可以用下面方式删除:<br>mysql&gt; delete from mysql.user where user=’用户’ and host=’主机域’;<br>mysql&gt; flush privileges;</p>
<p><strong>创建Mysql用户及赋予用户权限</strong><br>通过help查看grant命令帮助<br>mysql&gt; help grant<br>Name: ‘GRANT’<br>……..部分省略<br>CREATE USER ‘jeffrey’@’localhost’ IDENTIFIED BY ‘mypass’;<br>GRANT ALL ON db1.<em> TO ‘jeffrey’@’localhost’;<br>GRANT SELECT ON db2.invoice TO ‘jeffrey’@’localhost’;<br>GRANT USAGE ON </em>.* TO ‘jeffrey’@’localhost’ WITH MAX_QUERIES_PER_HOUR 90;<br>……..部分省略</p>
<p>通过grant命令简单语法如下：<br>1、    grant 命令简单语法如下：<br> grant all privileges on dbname.<em>  to  username@localhost identified by ‘passwd’;<br>说明：上述命令是授权localhost主机上通过用户username管理dbname数据库的所有权限，密码为passwd。<br>2、    操作实例：创建linuxunix用户，对test库具备所有权限，允许从localhost主机登陆管理数据库，密码为linuxunix。<br>grant all privileges on test.</em> to ‘linuxunix’@’localhost’ identified by ‘linuxunix’;</p>
<p>查看当前数据库用户情况，然后执行对应命令授权如下：<br>mysql&gt; grant all privileges on test.* to ‘linux’@’localhost’ identified by ‘linux’;<br>Query OK, 0 rows affected (0.00 sec)<br>查看授权后Mysql用户列表情况：<br>mysql&gt; select user,host from mysql.user;<br>+———–+———————–+<br>| user      | host                  |<br>+———–+———————–+<br>| root      | 127.0.0.1             |<br>|           | localhost             |<br>| linux     | localhost             |<br>| linuxunix | localhost             |<br>|           | localhost.localdomain |<br>+———–+———————–+<br>5 rows in set (0.00 sec)</p>
<p>Mysql 用户可以授权的权限有哪些：<br>SELECT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER,INSERT</p>
<p><strong>表操作</strong><br>指定字符集建表：<br>mysql&gt; create database test2;<br>Query OK, 1 row affected (0.00 sec)<br>mysql&gt; show create database test2;<br>+———-+——————————————————————+<br>| Database | Create Database                                                  |<br>+———-+——————————————————————+<br>| test2    | CREATE DATABASE <code>test2</code> /<em>!40100 DEFAULT CHARACTER SET latin1 </em>/ |<br>+———-+——————————————————————+<br>默认新增库是latin1字符。<br>新增表语法：<br>Create table &lt;表名&gt;(<br>&lt;字段名1&gt; &lt;类型1&gt;，<br>&lt;字段名2&gt; &lt;类型2&gt;，<br>…<br>&lt;字段名n&gt; &lt;类型n&gt;<br>);</p>
<p><strong>创建主键索引的方法：</strong><br>1、    在建表时可以增加主键索引的语句如下：<br>Create table student(<br>Id int(4) not null AUTO_INCREMENT,<br>Name char(20) not null,<br>Age tinyint(2) NOT Null default   ‘0’,<br>Dept varchar(16) default Null,<br>primary key(id),<br>KEY index_name(name)<br>);<br>提示： primary key(id), #主键<br>KEY index_name(name)#name字段普通索引</p>
<p>提示：PRI为主键的标识，MUL为普通索引的标识。</p>
<p>创建主键索引：<br>mysql&gt; alter table student change id id int primary key auto_increment;<br>mysql&gt; desc student;<br>+——-+————-+——+—–+———+—————-+<br>| Field | Type        | Null | Key | Default | Extra          |<br>+——-+————-+——+—–+———+—————-+<br>| id    | int(11)     | NO   | PRI | NULL    | auto_increment |<br>| Name  | char(20)    | NO   |     | NULL    |                |<br>| Age   | tinyint(2)  | NO   |     | 0       |                |<br>| Dept  | varchar(16) | YES  |     | NULL    |                |<br>+——-+————-+——+—–+———+—————-+<br>4 rows in set (0.00 sec)<br>在name列上添加索引，索引名为index_name;<br>mysql&gt; alter table student add index index_name(Name);<br>Query OK, 0 rows affected (0.13 sec)<br>Records: 0  Duplicates: 0  Warnings: 0<br>mysql&gt; desc student;<br>+——-+————-+——+—–+———+—————-+<br>| Field | Type        | Null | Key | Default | Extra          |<br>+——-+————-+——+—–+———+—————-+<br>| id    | int(11)     | NO   | PRI | NULL    | auto_increment |<br>| Name  | char(20)    | NO   | MUL | NULL    |                |<br>| Age   | tinyint(2)  | NO   |     | 0       |                |<br>| Dept  | varchar(16) | YES  |     | NULL    |                |<br>+——-+————-+——+—–+———+—————-+<br>4 rows in set (0.00 sec)<br>创建索引相关命令集合：<br>创建主键索引：<br>mysql&gt; alter table student change id id int primary key auto_increment;<br>创建唯一索引：<br>mysql&gt; create ind_name_dept on student(name,dept);<br>删除主键索引：<br>mysql&gt; alter table student drop primary key;<br>创建普通索引：<br>mysql&gt; alter table student add index index_dept(dept(8));<br>根据列的前N个字符创建索引：<br>mysql&gt; create index index_dept on student(dept(8));<br>根据多个列创建联合索引<br>mysql&gt; create index index_name_dept on student(name,dept);<br>根据多个列前N个字符创建联合索引<br>mysql&gt; create index index_name_dept on student(name(8),dept(10));<br>删除普通索引：<br>mysql&gt;alter table student drop index index_dept;<br>mysql&gt;drop index index_dept on student;<br>提示：<br>1、    要在表的列上创建索引。<br>2、    索引会加快查询速度，但是会影响更新的速度，因为要维护索引。<br>3、    索引不是越多越好，要是在频繁查询的where后的条件列上创建索引<br>4、    小表或唯一值极少的列上不建立索引，要在大表以及不同内容多的列上创建索引。<br><strong>查询数据</strong><br>(1)、命令语法：select &lt;字段1，字段2….&gt;  from &lt;表名&gt;  where &lt;表达式&gt;<br>(2)、例子：<br>mysql&gt; select <em> from test;<br>+—-+——–+<br>| id | name   |<br>+—-+——–+<br>|  1 | centos |<br>|  2 | redhat |<br>|  3 | ubuntu |<br>|  4 | SUSE   |<br>|  5 | AIX    |<br>+—-+——–+<br>5 rows in set (0.00 sec)<br>mysql&gt; select id,name from test where id=1;<br>+—-+——–+<br>| id | name   |<br>+—-+——–+<br>|  1 | centos |<br>+—-+——–+<br>1 row in set (0.00 sec)<br>mysql&gt; select id,name from test where id=1 and name=’centos’;  #and代表两边要同时成立要是or则取并集。<br>+—-+——–+<br>| id | name   |<br>+—-+——–+<br>|  1 | centos |<br>+—-+——–+<br>1 row in set (0.00 sec)<br>mysql&gt; select id,name from test where id&gt;2 and id&lt;5;<br>+—-+——–+<br>| id | name   |<br>+—-+——–+<br>|  3 | ubuntu |<br>|  4 | SUSE   |<br>+—-+——–+<br>2 rows in set (0.00 sec)<br><em>*排序：</em></em><br>语法：order by &lt;字段&gt;  +   asc升序/desc倒序：<br>例子：</p>
<p>mysql&gt; select id,name from test  order by id asc;<br>+—-+——–+<br>| id | name   |<br>+—-+——–+<br>|  1 | centos |<br>|  2 | redhat |<br>|  3 | ubuntu |<br>|  4 | SUSE   |<br>|  5 | AIX    |<br>+—-+——–+<br>5 rows in set (0.00 sec)</p>
<p>mysql&gt; select id,name from test  order by id desc;<br>+—-+——–+<br>| id | name   |<br>+—-+——–+<br>|  5 | AIX    |<br>|  4 | SUSE   |<br>|  3 | ubuntu |<br>|  2 | redhat |<br>|  1 | centos |<br>+—-+——–+<br>5 rows in set (0.00 sec)<br><strong>往表中插入数据：</strong><br>(1)    语法命令：Insert into &lt;表名&gt; [ (&lt;字段名1&gt;[…&lt;字段名n&gt;])] values (值1)[,(值n)]<br>(2)    新增一个简单的测试test<br>mysql&gt; create table test( id int(4) NOT NULL AUTO_INCREMENT,name char(20) not null,PRIMARY KEY (id) );<br>mysql&gt; show tables;<br>+—————-+<br>| Tables_in_test |<br>+—————-+<br>| student        |<br>| test           |<br>+—————-+<br>2 rows in set (0.00 sec)<br>往表中插入数据的不同的语法例子：<br>1、 指定所有列名，并且每列都插入值<br>mysql&gt; Insert into test(id,name) values(1,’centos’);<br>Query OK, 1 row affected (0.03 sec)<br>2、    由于id列为自增的，所以可以只在name列插入值<br>mysql&gt; select * from test;<br>+—-+——–+<br>| id | name   |<br>+—-+——–+<br>|  1 | centos |<br>+—-+——–+<br>1 row in set (0.00 sec)</p>
<p>mysql&gt; insert into test(name) values(‘redhat’);<br>Query OK, 1 row affected (0.00 sec)</p>
<p>mysql&gt; select * from test;<br>+—-+——–+<br>| id | name   |<br>+—-+——–+<br>|  1 | centos |<br>|  2 | redhat |<br>+—-+——–+<br>2 rows in set (0.00 sec)<br>3、    如果不指定列，则要按规矩为每列都插入适当的值。<br>mysql&gt; insert into test values(3,’ubuntu’);<br>4、    批量插入数据<br>mysql&gt; insert into test values(4,’SUSE’),(5,’AIX’);</p>
<p><strong>修改表中数据</strong><br>命令语法：update 表名 set 字段=新值 where 条件(一定要注意)<br>1、    修改指定行字段内容<br>mysql&gt; select * from test;<br>+—-+——–+<br>| id | name   |<br>+—-+——–+<br>|  1 | centos |<br>|  2 | redhat |<br>|  3 | ubuntu |<br>|  4 | SUSE   |<br>|  5 | AIX    |<br>+—-+——–+<br>5 rows in set (0.00 sec)</p>
<p>mysql&gt; update test set name=’windonws’ where id=3;<br>Query OK, 1 row affected (0.00 sec)<br>Rows matched: 1  Changed: 1  Warnings: 0<br>mysql&gt; select * from test;<br>+—-+———-+<br>| id | name     |<br>+—-+———-+<br>|  1 | centos   |<br>|  2 | redhat   |<br>|  3 | windonws |<br>|  4 | SUSE     |<br>|  5 | AIX      |<br>+—-+———-+<br>5 rows in set (0.00 sec)</p>
<p>2、    全部更改：<br>mysql&gt; update test set name=’win10’; #此方法慎用<br>Query OK, 5 rows affected (0.00 sec)<br>Rows matched: 5  Changed: 5  Warnings: 0<br>mysql&gt; select <em> from test;<br>+—-+——-+<br>| id | name  |<br>+—-+——-+<br>|  1 | win10 |<br>|  2 | win10 |<br>|  3 | win10 |<br>|  4 | win10 |<br>|  5 | win10 |<br>+—-+——-+<br>5 rows in set (0.00 sec)<br><strong>删除表中数据：</strong><br>mysql&gt; select </em> from test;<br>+—-+——–+<br>| id | name   |<br>+—-+——–+<br>|  1 | centos |<br>|  2 | redhat |<br>|  3 | ubuntu |<br>|  4 | SUSE   |<br>|  5 | AIX    |<br>+—-+——–+<br>5 rows in set (0.04 sec)<br>mysql&gt; delete from test where id=5;  #不加条件就是全部删除，此方法慎用<br>Query OK, 1 row affected (0.00 sec)<br>mysql&gt; select <em> from test;<br>+—-+——–+<br>| id | name   |<br>+—-+——–+<br>|  1 | centos |<br>|  2 | redhat |<br>|  3 | ubuntu |<br>|  4 | SUSE   |<br>+—-+——–+<br>4 rows in set (0.00 sec)<br><em>*清空表内容</em></em><br>mysql&gt; truncate table test;   </p>
<p><strong>增删改表字段</strong><br>命令语法：alter table 表名 add 字段 类型 其他;</p>
<p><strong>更改表名</strong><br>1、语法：rename table 原表名 to 新表名;<br>mysql&gt; rename table test to test2;<br>Query OK, 0 rows affected (0.00 sec)<br>mysql&gt; show tables;<br>+—————-+<br>| Tables_in_test |<br>+—————-+<br>| student        |<br>| test2          |<br>+—————-+<br>2 rows in set (0.00 sec)<br>2、alter table 原表名 rename to 新表名;<br>mysql&gt; alter table test2 rename to test;<br>Query OK, 0 rows affected (0.00 sec)<br>mysql&gt; show tables;<br>+—————-+<br>| Tables_in_test |<br>+—————-+<br>| student        |<br>| test           |<br>+—————-+<br>2 rows in set (0.00 sec)<br><strong>删除表</strong><br>mysql&gt; drop table表名;<br>Query OK, 0 rows affected (0.00 sec)</p>
<p><strong>备份</strong><br>备份test数据库到/mysqldate目录下<br>[root@localhost ~]# mysqldump -uroot -pcentos -B test &gt; /mysqldate/test_bak.sql</p>
<p><strong>还原数据库</strong><br>[root@localhost mysqldate]# mysql -uroot -pcentos test &lt; /mysqldate/test_bak.sql</p>

	
	</div>
	
  
</div>
	<a type="button" href="/2015/12/23/MYSQLl╩¤╛▌┐т╡─SQL╙я╖и/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-12-19 </div>
			<div class="article-title"><a href="/2015/12/19/MYSQL╓ў┤╙╕┤╓╞/">MYSQL主从复制</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <blockquote>
<p>啥是MYSQL主从复制？</p>
</blockquote>
<p>MYSQL主从复制:是指复制多一个和主数据库数据完全一样的数据库坏境，当然我我们称其为从数据库。</p>
<blockquote>
<p>MYSQL主从复制使用场景?</p>
</blockquote>
<p>例如：<br>1、作为后备数据库，当主数据库服务器出现故障后，可切换到从数据库继续工作；<br>2、可以在从数据库作备份、数据统计等工作，这样不影响主数据库的性能(当然建立主从复制本身就是一个备份)；<br>3、减轻主库负载，可以在一些实时性要求并不太高的情况建立读写分离，主库为写，从库为读。</p>
<blockquote>
<p>mysql支持的复制类型：</p>
</blockquote>
<p>1、基于语句的复制：  在主服务器上执行的SQL语句，在从服务器上执行同样的语句。MySQL默认采用基于语句的复制，效率比较高。一旦发现没法精确复制时，   会自动选着基于行的复制。<br>2、基于行的复制：把改变的内容复制过去，而不是把命令在从服务器上执行一遍. 从mysql5.0开始支持<br>3、混合类型的复制: 默认采用基于语句的复制，一旦发现基于语句的无法精确的复制时，就会采用基于行的复制。</p>
<blockquote>
<p>常见主从复制方式:</p>
</blockquote>
<p>1、一主单从或者多从的Mysql架构方案(此架构只能在Master端进行数据写入)<br><br><img src="/img/12-master-slave-1.png" style="width: 650x;"><br>2、双向主主同步逻辑图，此架构可以在Master1或者Master2端进行数据读写。<br> <br><img src="/img/12-master-slave-2.png" style="width: 650x;"><br>3、线性级联单项双主同步逻辑图，此架构只能在Master1端进行数据写入<br> <br><img src="/img/12-master-slave-3.png" style="width: 650x;"><br>4、环状循环复制<br><br><img src="/img/12-master-slave-4.png" style="width: 650x;"><br><strong>单向一主一从实战：</strong><br><br><img src="/img/12-master-slave-5.png" style="width: 650x;"></p>
<p>Master主机：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]<span class="comment"># vim  /etc/my.cnf </span></span><br><span class="line">[mysqld]</span><br><span class="line">datadir=/var/lib/mysql</span><br><span class="line">socket=/var/lib/mysql/mysql.sock</span><br><span class="line">user=mysql</span><br><span class="line">symbolic-links=<span class="number">0</span></span><br><span class="line">log-bin=mysql_bak-bin 	<span class="comment">#启用二进制日志(主必须开启）</span></span><br><span class="line">server-id = <span class="number">141</span>		<span class="comment">#服务器唯一ID，默认是1，取IP最后一段</span></span><br></pre></td></tr></table></figure></p>
<p>Slave机子：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]<span class="comment"># vim  /etc/my.cnf </span></span><br><span class="line">log-bin=mysql_bak-bin   <span class="comment">#启用二进制日志</span></span><br><span class="line">server-id=<span class="number">129</span></span><br></pre></td></tr></table></figure></p>
<p>master授权：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; grant replication slave on *.* to rep@<span class="string">'192.168.0.129'</span> identified by <span class="string">'centos'</span>;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.00</span> sec)</span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.00</span> sec)</span><br><span class="line">mysql&gt; select user,host <span class="keyword">from</span> mysql.user;</span><br><span class="line">+--------+-----------------------+</span><br><span class="line">| user   | host                  |</span><br><span class="line">+--------+-----------------------+</span><br><span class="line">| root   | <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>             |</span><br><span class="line">| rep    | <span class="number">192.168</span><span class="number">.108</span><span class="number">.129</span>         |</span><br><span class="line">| root   | localhost.localdomain |</span><br><span class="line">+--------+-----------------------+</span><br><span class="line"><span class="number">8</span> rows <span class="keyword">in</span> set (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show grants <span class="keyword">for</span> rep@<span class="string">'192.168.108.129'</span>;</span><br><span class="line">+------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Grants <span class="keyword">for</span> rep@<span class="number">192.168</span><span class="number">.108</span><span class="number">.129</span>                                                                                               |</span><br><span class="line">+------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| GRANT REPLICATION SLAVE ON *.* TO <span class="string">'rep'</span>@<span class="string">'192.168.108.129'</span> IDENTIFIED BY PASSWORD <span class="string">'*128977E278358FF80A246B5046F51043A2B1FCED'</span> |</span><br><span class="line">+------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> set (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure></p>
<p>进行锁表：<br>mysql&gt; flush tables with read lock;<br>Query OK, 0 rows affected (0.01 sec)</p>
<p>查询master的状态:<br>mysql&gt; show master status;<br>+———————-+———-+————–+——————+<br>| File                 | Position | Binlog_Do_DB | Binlog_Ignore_DB |<br>+———————-+———-+————–+——————+<br>| mysql_bak-bin.000005 |   136959 |              |                  |<br>+———————-+———-+————–+——————+<br>1 row in set (0.00 sec)</p>
<p>备份数据库：<br>[root@localhost ~]# mysqldump -root -pcentos –events -A -B|gzip &gt; slave_bak.sql.gz</p>
<p>[root@localhost ~]# scp slave_bak.sql.gz root@192.168.108.129:/opt<br>root@192.168.108.129’s password:<br>slave_bak.sql.gz                                    100%   20     0.0KB/s   00:00</p>
<p>slave备份：<br>[root@localhost opt]# gunzip  change master to MASTER_HOST=’192.168.108.141’,MASTER_USER=’rep’,MASTER_PASSWORD=’centos’,MASTER_LOG_FILE=’mysql_bak-bin.000005’,MASTER_LOG_POS=136959;<br>Query OK, 0 rows affected (0.03 sec)</p>
<p>mysql&gt; start slave;<br>Query OK, 0 rows affected (0.00 sec)</p>
<p>mysql&gt; show slave status\G<br><strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong> 1. row <strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong><br>               Slave_IO_State: Waiting for master to send event<br>                  Master_Host: 192.168.108.141<br>                  Master_User: rep<br>                  Master_Port: 3306<br>                Connect_Retry: 60<br>              Master_Log_File: mysql_bak-bin.000005<br>          Read_Master_Log_Pos: 202132<br>               Relay_Log_File: mysqld-relay-bin.000002<br>                Relay_Log_Pos: 65428<br>        Relay_Master_Log_File: mysql_bak-bin.000005<br>             Slave_IO_Running: Yes<br>            Slave_SQL_Running: Yes<br>              Replicate_Do_DB:<br>          Replicate_Ignore_DB:<br>           Replicate_Do_Table:<br>       Replicate_Ignore_Table:<br>      Replicate_Wild_Do_Table:<br>  Replicate_Wild_Ignore_Table:<br>                   Last_Errno: 0<br>                   Last_Error:<br>                 Skip_Counter: 0<br>          Exec_Master_Log_Pos: 202132<br>              Relay_Log_Space: 65584<br>              Until_Condition: None<br>               Until_Log_File:<br>                Until_Log_Pos: 0<br>           Master_SSL_Allowed: No<br>           Master_SSL_CA_File:<br>           Master_SSL_CA_Path:<br>              Master_SSL_Cert:<br>            Master_SSL_Cipher:<br>               Master_SSL_Key:<br>        Seconds_Behind_Master: 0<br>Master_SSL_Verify_Server_Cert: No<br>                Last_IO_Errno: 0<br>                Last_IO_Error:<br>               Last_SQL_Errno: 0<br>               Last_SQL_Error:<br>1 row in set (0.00 sec)</p>
<p>Master主机建库测试：<br>mysql&gt; create database testmaster_slave;<br>Query OK, 1 row affected (0.00 sec)</p>
<p>mysql&gt; show databases;<br>+——————–+<br>| Database           |<br>+——————–+<br>| information_schema |<br>| mysql              |<br>| python             |<br>| test               |<br>| testmaster_slave   |<br>| zabbix             |<br>+——————–+<br>6 rows in set (0.00 sec)</p>
<p>Slave主机：<br>mysql&gt; show databases;<br>+——————–+<br>| Database           |<br>+——————–+<br>| information_schema |<br>| mysql              |<br>| test               |<br>| testmaster_slave   |<br>| zabbix             |<br>+——————–+<br>6 rows in set (0.00 sec)</p>

	
	</div>
	
  
</div>
	<a type="button" href="/2015/12/19/MYSQL╓ў┤╙╕┤╓╞/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-12-19 </div>
			<div class="article-title"><a href="/2015/12/19/CentOS-6-5╧┬▒р╥ы░▓╫░MySQL-5-6-28/">CentOS 6.5下编译安装MySQL 5.6.28</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <p>CentOS 6.5下编译安装MySQL 5.6.28</p>
<blockquote>
<blockquote>
<p>MySQL  是一个关系型数据库管理系统，由瑞典 MySQL AB 公司开发，目前属于 Oracle 旗下公司。MySQL 最流行的关系型数据库管理系统，在 WEB 应用方面 MySQL 是最好的 RDBMS (Relational Database Management System，关系数据库管理系统) 应用软件之一。MySQL 是一种关联数据库管理系统，关联数据库将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。MySQL 所使用的 SQL 语言是用于访问数据库的最常用标准化语言。MySQL 软件采用了双授权政策（本词条“授权政策”），它分为社区版和商业版，由于其体积小、速度快、总体拥有成本低，尤其是开放源码这一特点，一般中小型网站的开发都选择 MySQL 作为网站数据库。由于其社区版的性能卓越，搭配 PHP 和 Apache 或者NGINX可组成（LAMP和LNMP架构）良好的开发环境。</p>
</blockquote>
</blockquote>
<ul>
<li><strong>MySQL5.6新特性包括：</strong><br>•    更好的性能和可扩展性 <pre><code>改进InnoDB存储引擎所带来更好的交易吞吐量
改良的优化所带来更好的查询执行时间和诊断能力
</code></pre>•    在线DDL /架构操作所带来更好的应用程序可用性<br>•    通过Memcached的API以NoSQL访问InnoDB所带来的更好的开发速度<br>•    改进复制技术所带来的高性能和能自行修复的集群部署<br>•    改进的Performance Schema所带来的更好的侦测和监测能力<br>•    改进的安全控制，使您部署应用程序时不需担心<br>•    其他重要的增强功能</li>
</ul>
<p><strong>一、卸载旧版本</strong><br>1、检查是否安装有MySQL<br>[root@localhost ~]#rpm -qa | grep mysql<br>2、通过以下的命令来卸载<br>[root@localhost ~]#rpm -e mysql   //普通卸载模式<br>[root@localhost ~]#rpm -e –nodeps mysql    // 强力卸载模式(当普通卸载时候提示有依赖的其它文件，无法卸载情况下用该命令强行卸载)</p>
<p><strong>二、安装MySQL</strong><br>1、由于安装建议用源码安装Mysql，先安装相关编译包：<br>[root@localhost ~]# yum install -y make gcc-c++ cmake bison-devel  ncurses-devel</p>
<p>2、下载源码包<br>下载mysql5.6.28链接：<a href="http://dev.mysql.com/downloads/mysql/5.6.html" target="_blank" rel="noopener">http://dev.mysql.com/downloads/mysql/5.6.html</a><br>解压mysql-5.6.28.tar.gz<br>[root@localhost local]# pwd<br>/usr/local<br>[root@localhost local]# tar vxf mysql-5.6.28.tar.gz<br>[root@localhost local]# cd mysql-5.6.28<br>3、编译安装</p>
<pre><code class="python">[root@localhost mysql-<span class="number">5.6</span><span class="number">.28</span>]<span class="comment">#cmake \</span>
-DCMAKE_INSTALL_PREFIX=/usr/local/mysql \
-DMYSQL_DATADIR=/usr/local/mysql/data \
-DSYSCONFDIR=/etc \
-DWITH_MYISAM_STORAGE_ENGINE=<span class="number">1</span> \
-DWITH_INNOBASE_STORAGE_ENGINE=<span class="number">1</span> \
-DWITH_MEMORY_STORAGE_ENGINE=<span class="number">1</span> \
-DWITH_READLINE=<span class="number">1</span> \
-DMYSQL_UNIX_ADDR=/var/lib/mysql/mysql.sock \
-DMYSQL_TCP_PORT=<span class="number">3306</span> \
-DENABLED_LOCAL_INFILE=<span class="number">1</span> \
-DWITH_PARTITION_STORAGE_ENGINE=<span class="number">1</span> \
-DEXTRA_CHARSETS=all \
-DDEFAULT_CHARSET=utf8 \
-DDEFAULT_COLLATION=utf8_general_ci
[root@localhost mysql-<span class="number">5.6</span><span class="number">.28</span>]<span class="comment"># make &amp;&amp;　make install</span>
</code></pre>
<p>安装过程比较久</p>
<p><strong>三、配置MySQL</strong><br>1、创建mysql用户和组(如果存在则忽略)<br>[root@localhost mysql-5.6.28]# groupadd mysql<br>[root@localhost mysql-5.6.28]# useradd -g mysql mysql</p>
<p>2、设置权限<br>[root@localhost mysql-5.6.28]# chown -R mysql:mysql /usr/local/mysql</p>
<p>3、初始化配置<br>[root@localhost scripts]# pwd<br>/usr/local/mysql/scripts<br>[root@localhost scripts]# ./mysql_install_db  –basedir=/usr/local/mysql –datadir=/usr/local/mysql/data/ –user=mysql</p>
<p>4、配置坏境变量：<br>[root@localhost ~]# echo -e “PATH=/usr/local/mysql/bin:\$PATH\nexport PATH”  &gt;&gt; /etc/profile<br>[root@localhost ~]# source /etc/profile</p>
<p><strong>四、启动MySQL、设置开机启动</strong></p>
<pre><code class="python">[root@localhost mysql]<span class="comment">#cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql  #添加服务，复制服务脚本到init.d目录下</span>

[root@localhost mysql]<span class="comment">#chkconfig mysql on</span>

[root@localhost mysql]<span class="comment"># service mysql start  #启动MySQL</span>
Starting MySQL..                                           [确定]

[root@localhost mysql]<span class="comment"># ps -ef |grep mysqld</span>
root      <span class="number">20503</span>      <span class="number">1</span>  <span class="number">0</span> <span class="number">17</span>:<span class="number">52</span> pts/<span class="number">2</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> /bin/sh /usr/local/mysql/bin/mysqld_safe --datadir=/var/lib/mysql --pid-file=/var/lib/mysql/localhost.localdomain.pid
mysql     <span class="number">20705</span>  <span class="number">20503</span>  <span class="number">7</span> <span class="number">17</span>:<span class="number">52</span> pts/<span class="number">2</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> /usr/local/mysql/bin/mysqld --basedir=/usr/local/mysql --datadir=/var/lib/mysql --plugin-dir=/usr/local/mysql/lib/plugin --user=mysql --log-error=/var/log/mysqld.log --pid-file=/var/lib/mysql/localhost.localdomain.pid --socket=/var/lib/mysql/mysql.sock
</code></pre>
<p>[root@localhost mysql]# mysql -uroot -p<br>Enter password:<br>Welcome to the MySQL monitor.  Commands end with ; or \g.<br>Your MySQL connection id is 33<br>Server version: 5.6.28-log Source distribution<br>Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.<br>Oracle is a registered trademark of Oracle Corporation and/or its<br>affiliates. Other names may be trademarks of their respective<br>owners.<br>Type ‘help;’ or ‘\h’ for help. Type ‘\c’ to clear the current input statement.<br>mysql&gt;<br>mysql&gt; select version();<br>+————+<br>| version()  |<br>+————+<br>| 5.6.28-log |<br>+————+<br>1 row in set (0.00 sec)</p>

	
	</div>
	
  
</div>
	<a type="button" href="/2015/12/19/CentOS-6-5╧┬▒р╥ы░▓╫░MySQL-5-6-28/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-12-06 </div>
			<div class="article-title"><a href="/2015/12/06/╝п╚║╙ы╕▀┐╔╙├╓оLVS╜щ╔▄/">集群与高可用之LVS介绍</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <p>集群：随着互联网的发展，用户访问互联网也随之增加，服务器的负载也越来越大，如果使用单台服务器，负载能力非常有限。要是出现单点故障时候，将会导致整个网络服务中断。此时便需要使用集群架构，通过N台服务器主机结合在一起实现网络分流。集群产品可以选择硬件和软件。硬件方面有F5的GIG-IP、Radware的APPDirector。主流的软件有LVS、Nginx、HAProxy等产品。高可用性集群使服务器系统的运行速度和响应速度尽可能快。它们经常利用在多台机器上运行的冗余节点和服务，用来相互跟踪。如果某个节点失败，它的替补者将在几秒钟或更短时间内接管它的职责。</p>
<ul>
<li><strong>LVS负载均衡的简介 </strong></li>
</ul>
<p>LVS是Linux Virtual Server的简写，意即Linux虚拟服务器，是一个虚拟的服务器集群系统。1998年5月由我国的章文嵩博士主导开发的负载均衡项目，是中国国内最早出现的自由软件项目之一，目前LVS已经被集成到linux内核模块中。该项目在Linux内核中实现了基于IP的数据请求的负载均衡调度算案。<br>一般来说，LVS集群采用三层结构，其主要组成部分为：</p>
<ul>
<li><strong>A、负载调度器（load balancer）</strong>，它是整个集群对外面的前端机，负责将客户的请求发送到一组服务器上执行，而客户认为服务是来自一个IP地址（我们可称之为虚拟IP地址）上的。</li>
<li><strong>B、服务器池（server pool） </strong>，是一组真正执行客户请求的服务器，执行的服务有WEB、MAIL、FTP和DNS等。</li>
<li><p><strong>C、共享存储（shared storage） </strong>，它为服务器池提供一个共享的存储区，这样很容易使得服务器池拥有相同的内容，提供相同的服务。</p>
</li>
<li><p><strong>从工作模式上分LVS分为NAT模式、TUN模式、DR模式。</strong></p>
</li>
<li><p><strong>基于NAT的LVS负载均衡：</strong></p>
</li>
</ul>
<p>NAT（Network Address Translation，网络地址转换）。当在专用网内部的一些主机本来已经分配到了本地IP地址（即仅在本专用网内使用的专用地址），但现在又想和因特网上的主机通信（并不需要加密）时，可使用NAT方法。最常见的就是我们购买了一个家用路由器，而家里连接N台设备时内部分配的是私用IP，此时通过NAT技术，修改数据报头，能内网设备能与外面互联网进行网络通信。</p>
<p>1、LVS负载调度器使用两块网卡配置不同地址，Eth1设置为外网IP与外部网络通信，Eth0设置为内网IP通过交换机连接到内部Web服务器。<br>2、用户通过互联网NDS服务器解析到公司外网IP180.180.180.180，相对与真实服务器而言，Eth1称为VIP，用户以为VIP服务器是真实服务器，并不知道VIP后面存在多少台真实服务器。<br>3、当用户数据到达LVS服务器时候，此时LVS根据预设的算法选择后端一台真实的服务器，通过修改数据包的目的地址以及端口（修改为要到达服务器的目的地址以及端口），将数据请求转发给真实的服务器。<br>4、真实服务器处理请求信号后把响应数据包返回给LVS调度服务器，调度器将修改响应数据包的目的地址和端口修改为VIP 的地址和端口，最后由调度器将响应数据包发送回互联网终端用户。<br><br><img src="/img/12-LVS-1.png" style="width: 650x;"><br>缺点：在整个过程中，所有输入输出的流量都要经过LVS 调度服务器。显然，LVS 调度服务器的网络I/O压力将会非常大，因此很容易成为瓶颈，特别是对于请求流量很小，而响应流量很大的Web类应用来说尤为如此。<br>优点： NAT模式的优点在于配置及管理简单，由于了使用NAT技术，LVS 调度器及应用服务器可以在不同网段中，网络架构更灵活，应用服务器只需要进行简单的网络设定即可加入集群。</p>
<ul>
<li><strong>基于TUN的LVS负载均衡：</strong></li>
</ul>
<p>IP隧道（IP tunning）是一种数据包封装技术，它是将原始IP包（其报头包含原始发送者和最终目的地）封装在另一个数据包（称为封装的IP包）的数据净荷中进行传输，从而实现将一个目标为调度器的VIP地址的数据包封装，通过隧道转发给后端服务器（Real Server），通过将客户端发往调度器的原始数据包封装，调度器通过修改数据包的包头（修改为经过算法出来的真实服务器的IP和端口）。<br><br><img src="/img/12-LVS-2.png" style="width: 650x;"><br>缺点:由于后端web服务器处理数据后直接发送给终端用户，此时需要租借大量IP（特别是后端服务器使用较多的情况下）。<br>优点:实现IP Tunnel模式时，LVS 调度器将TCP/IP请求进行重新封装并转发给目标应用服务器，由目标应用服务器直接回复用户。应用服务器之间是通过IP Tunnel来进行转发，因此两者可以存在于不同的网段中。</p>
<ul>
<li><strong>基于DR的LVS负载均衡： </strong></li>
</ul>
<p>DR（Direct Routing）模式也被称为直接路由模式，实现此模式时LVS 调度器只实现IP分发功能，应用服务器收到IP数据包并处理后，通过自身来实现IP地址转换，将数据直接传送给用户。在此模式下，LVS 调度器只对TCP/IP数据包的头信息进行处理，然后直接路由到应用服务器，不需要处理应用服务器返回的数据信息，因此性能较高，是三种模式中最常用的一种。</p>
<p>（1）LVS 调度器接收用户发来的消息，根据调度算法进行IP分流，将数据包发送到后端应用服务器。<br>（2）应用服务器执行相应的操作后，将结果直接返回给客户。<br>（3）与隧道模式不同的是，直接路由模式（DR模式）要求调度器 与后端服务器必须在同一个局域网内，VIP地址需要在调度器与后端服务器间共享，因为最终的真实服务器给客户端回应数据包时需要设置源IP地址为VIP地址，目标IP为客户端IP，这样客户端访问的是调度器的VIP地址，回应的地址依然是该VIP地址。<br><br><img src="/img/12-LVS-3.png" style="width: 650x;"><br>缺点：唯一的缺陷在于它要求LVS 调度器及所有应用服务器在同一个网段中，因此不能实现集群的跨网段应用。<br>优点：可见在处理过程中LVS Route只处理请求的直接路由转发，所有响应结果由各个应用服务器自行处理，并对用户进行回复，网络流量将集中在LVS调度器之上。</p>
<ul>
<li><p><strong>LVS在内核中的8种调度算法：</strong></p>
</li>
<li><p><strong>轮询调度： </strong>IP分发时逐个地对Real Server进行轮询。</p>
</li>
<li><strong>加权轮询调度：</strong>配合权值进行轮询策略计算。</li>
<li><strong>最小连接调度： </strong>将新的IP请求分发到访问队列较短的Real Server。</li>
<li><strong>加权最小连接调度： </strong>配合权值进行最小连接优先策略计算。</li>
<li><strong>基于局部性最少的连接： </strong>以下简称LBLCS，根据目标IP地址找出最近使用的服务器，若该服务器可用并且没有超载（系统压力未达到一半），就将请求发送到该服务器，否则使用最小连接优先策略。此策略主要针对                                                     的是Cache网关服务器。</li>
<li><strong>带复制的基于局部性最少连接： </strong>与LBLCS类似，在LBLCS的基础上加入复制调度策略，使得“热门”网站使用时尽量Cache在同一台网关服务器中，进一步避免了在多台服务器中保存相同的Cache信息。此策略主要针对的边是Cache网关网关服务器。</li>
<li><strong>目标地址散列调度：Scheduling： </strong>通过对目标地址的Hash计算来确定目标服务器。此策略主要针对的是Cache网关服务器。<br>源地址散列调度:通过对源地址的Hash计算来确定目标服务器。此策略主要针对的是Cache网关服务器。</li>
</ul>

	
	</div>
	
  
</div>
	<a type="button" href="/2015/12/06/╝п╚║╙ы╕▀┐╔╙├╓оLVS╜щ╔▄/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-12-06 </div>
			<div class="article-title"><a href="/2015/12/06/redis-░▓╫░┼ф╓├/">redis 安装配置</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <p>redis官网：  <a href="http://redis.io/" target="_blank" rel="noopener">http://redis.io/</a><br>redis中文网：<a href="http://www.redis.cn/" target="_blank" rel="noopener">http://www.redis.cn/</a><br>解压：tar zxvf redis-2.8.19.tar.gz<br>指定安装路径：make&amp;&amp;make PREFIX=/opt/redis install<br>配置环境变量：echo ‘PATH=/opt/redis/bin:$PATH’ &gt;&gt; /etc/profile<br>                         source /etc/profile<br>[root@localhost bin]# redis-server –help<br>Usage: ./redis-server [/path/to/redis.conf] [options]<br>       ./redis-server - (read config from stdin)<br>       ./redis-server -v or –version<br>       ./redis-server -h or –help<br>       ./redis-server –test-memory <megabytes></megabytes></p>
<p>Examples:<br>       ./redis-server (run the server with default conf)<br>       ./redis-server /etc/redis/6379.conf<br>       ./redis-server –port 7777<br>       ./redis-server –port 7777 –slaveof 127.0.0.1 8888<br>       ./redis-server /etc/myredis.conf –loglevel verbose</p>
<p>Sentinel mode:<br>       ./redis-server /etc/sentinel.conf –sentinel</p>
<hr>
<p><br><img src="/img/12-redis-1.png" style="width: 650x;"></p>
<p>启动redis：./opt/redis/redis-server<br>[root@localhost bin]# redis-cli<br>127.0.0.1:6379&gt; set xiaomi dami<br>OK<br>127.0.0.1:6379&gt; get xiaomi<br>“dami”<br>127.0.0.1:6379&gt;<br>一般只需要这则可：</p>
<p><br><img src="/img/12-redis-2.png" style="width: 650x;"></p>
<hr>
<p>主从复制设置：vim redis.conf 添加  slaveof IP 端口<br><br><img src="/img/12-redis-3.png" style="width: 650x;"><br><br><img src="/img/12-redis-4.png" style="width: 650x;"><br>在主库上操作：<br><br><img src="/img/12-redis-5.png" style="width: 650x;"><br>从库读写监控：<br><br><img src="/img/12-redis-6.png" style="width: 650x;"><br><br><img src="/img/12-redis-7.png" style="width: 650x;"></p>
<hr>

	
	</div>
	
  
</div>
	<a type="button" href="/2015/12/06/redis-░▓╫░┼ф╓├/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-12-06 </div>
			<div class="article-title"><a href="/2015/12/06/python-║═mysql╜╗╗е/">python 和mysql交互</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <p>安装MySQLdb库：yum install -y mysqld-python</p>
<p>要是无法安装可以从此下载：<a href="https://pypi.python.org/pypi/MySQL-python/" target="_blank" rel="noopener">https://pypi.python.org/pypi/MySQL-python/</a></p>
<p>  [root@localhost ~]# tar xzvf MySQL-python-1.2.5.tar.gz<br>  [root@localhost ~]# cd MySQL-python-1.2.5<br>  [root@localhost ~]# python setup.py build<br>  [root@localhost ~]# python setup.py install</p>
<p>一般mysql和python交换时候我们会行五步曲：（1）连接数据库;（2）建立指针；（3）通过指针插入记录；（4）查询或修改数据库。（5）关闭数据库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment">#导入模块&gt;&gt;&gt; import MySQLdb&gt;&gt;&gt; #连接数据库&gt;&gt;&gt; conn = MySQLdb.connect(host="localhost",user="root",passwd="密码",db="数据库名",port=3036,charset="utf8")</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment">#建立指针&gt;&gt;&gt; cur = conn.cursor()</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment">#插入记录&gt;&gt;&gt; cur.execute("MYSQL语句)</span></span><br><span class="line"><span class="number">1L</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment">#提交保存&gt;&gt;&gt; conn.commit()</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment">#关闭数据库</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cur.close()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>conn.close()</span><br></pre></td></tr></table></figure>
<p>以下是具体连接例子：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/sbin/env python</span></span><br><span class="line"><span class="comment">#-*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> MySQLdb</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:                 </span><br><span class="line">     conn=MySQLdb.connect(host=<span class="string">'localhost'</span>,user=<span class="string">'root'</span>,passwd=<span class="string">'linuxunix'</span>,db=<span class="string">'zabbix'</span>)</span><br><span class="line">     cur=conn.cursor()</span><br><span class="line">     recount=cur.execute(<span class="string">'select * from screens'</span>)</span><br><span class="line">     date = cur.fetchall()</span><br><span class="line">     <span class="keyword">print</span> recount</span><br><span class="line">     <span class="keyword">for</span> i <span class="keyword">in</span> date:</span><br><span class="line">        <span class="keyword">print</span> i</span><br><span class="line">     cur.close()</span><br><span class="line">     conn.close()</span><br><span class="line"><span class="keyword">except</span> MySQLdb.Error,e:</span><br><span class="line">     <span class="keyword">print</span> <span class="string">"Mysql Error %d:%s"</span> %(e.args[<span class="number">0</span>],e.args[<span class="number">1</span>])</span><br></pre></td></tr></table></figure></p>
<p><br><img src="/img/12-python-mysql-1.png" style="width: 650x;"><br><br><img src="/img/12-python-mysql-2.png" style="width: 650x;"></p>

	
	</div>
	
  
</div>
	<a type="button" href="/2015/12/06/python-║═mysql╜╗╗е/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-12-06 </div>
			<div class="article-title"><a href="/2015/12/06/╩╣╙├zabbix API╜╙┐┌┤ю╜иgrafana/">使用zabbix API接口搭建grafana</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <p>或许很多小伙伴都说zabbix难看，实际上真的难看吗？我们可以帮它穿上一件皇帝的新衣变得不难看，先直接让大家看看成果吧：<br><br><img src="/img/12-grafana-1.png" style="width: 650x;"><br>要是觉得看得不清晰，可以直接看grafana官方演示站点 <a href="http://play.grafana.org/" target="_blank" rel="noopener">http://play.grafana.org/</a></p>
<ul>
<li><strong>配置过程：</strong></li>
</ul>
<p>一、下载安装grafana<br>下载链接：<a href="http://docs.grafana.org/installation/rpm/" target="_blank" rel="noopener">http://docs.grafana.org/installation/rpm/</a><br>要是觉得麻烦可以直接下载：wget <a href="https://grafanarel.s3.amazonaws.com/builds/grafana-2.5.0-1.x86_64.rpm" target="_blank" rel="noopener">https://grafanarel.s3.amazonaws.com/builds/grafana-2.5.0-1.x86_64.rpm</a><br>安装：rpm -Uvh grafana-2.5.0-1.x86_64.rpm<br>二、安装grafana-zabbix插件</p>
<p>shell #git clone  <a href="https://github.com/alexanderzobnin/grafana-zabbix/" target="_blank" rel="noopener">https://github.com/alexanderzobnin/grafana-zabbix/</a></p>
<p>shell #sudo cp -r grafana-zabbix/zabbix/  /usr/share/grafana/public/app/plugins/datasource/<br>shell #ls  /usr/share/grafana/public/app/plugins/datasource/<br>shell #vim   /usr/share/grafana/public/app/plugins/datasource/zabbix/plugin.json<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="string">"pluginType"</span> :  <span class="string">"datasource"</span> ,</span><br><span class="line"><span class="string">"name"</span> :  <span class="string">"Zabbix"</span> ,</span><br><span class="line"><span class="string">"type"</span> :  <span class="string">"zabbix"</span> ,</span><br><span class="line"><span class="string">"serviceName"</span> :  <span class="string">"ZabbixAPIDatasource"</span> ,</span><br><span class="line"><span class="string">"module"</span> :  <span class="string">"plugins/datasource/zabbix/datasource"</span> ,</span><br><span class="line"><span class="string">"partials"</span> : &#123;</span><br><span class="line"><span class="string">"config"</span> :  <span class="string">"app/plugins/datasource/zabbix/partials/config.html"</span> ,</span><br><span class="line"><span class="string">"query"</span> :  <span class="string">"app/plugins/datasource/zabbix/partials/query.editor.html"</span> ,</span><br><span class="line"><span class="string">"annotations"</span> :  <span class="string">"app/plugins/datasource/zabbix/partials/annotations.editor.html"</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"username"</span> :  <span class="string">"guest"</span> ,   <span class="comment">#配置用户名，注意此用户在zabbix中存在，且对zabbix数据有只读权限（不需要写权限）</span></span><br><span class="line"><span class="string">"password"</span> :  <span class="string">"guest"</span> ,   <span class="comment">#配置密码</span></span><br><span class="line">  <span class="string">"metrics"</span> :  true ,</span><br><span class="line"><span class="string">"annotations"</span> :  true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>安装完成后启动应用：service grafana-server restart</p>
<p>登陆浏览器配置：IP:3000<br><br><img src="/img/12-grafana-2.png" style="width: 650x;"><br><br><img src="/img/12-grafana-3.png" style="width: 650x;"><br><br><img src="/img/12-grafana-4.png" style="width: 650x;"></p>
<p>配置后效果如下：<br><br><img src="/img/12-grafana-5.png" style="width: 650x;"><br>由于一开始是参照<a href="http://www.tuicool.com/articles/b2miiuJ此文做的插件配置，现在也分享给大家" target="_blank" rel="noopener">http://www.tuicool.com/articles/b2miiuJ此文做的插件配置，现在也分享给大家</a></p>

	
	</div>
	
  
</div>
	<a type="button" href="/2015/12/06/╩╣╙├zabbix API╜╙┐┌┤ю╜иgrafana/#more" class="btn btn-default more">Read More</a>
</div>

		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
    	<li class="prev"><a href="/page/6/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i> Prev</a></li>
  		

        <li><a href="/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/page/8/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a> </li>          
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div class="widget tag">
    <h3 class="title">归档</h3>
    <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">2019年03月</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">2019年02月</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">2018年07月</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">2018年06月</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">2018年05月</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">2018年03月</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">2018年02月</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">2018年01月</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">2017年11月</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">2017年09月</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">2017年08月</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">2017年07月</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">2017年03月</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">2017年02月</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">2016年01月</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">2015年12月</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">2015年11月</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">2015年10月</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">2015年09月</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">2015年08月</a><span class="archive-list-count">5</span></li></ul>
  </div>

		
			
		
			

		
			
<div class="widget">
  <h4>Recent Posts</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2019/03/24/如何进入Docker容器和Pod？/"><i class="fa fa-file-o"></i>如何进入Docker容器和Pod？</a>
      </li>
    
      <li>
        <a href="/2019/03/24/如何解决The-connection-to-the-server-localhost8080-was-refused》？/"><i class="fa fa-file-o"></i>如何解决The connection to the s...</a>
      </li>
    
      <li>
        <a href="/2019/03/03/python-cStringIO模块-附生成excel并发送邮件实例/"><i class="fa fa-file-o"></i>python cStringIO模块( 附生成exce...</a>
      </li>
    
      <li>
        <a href="/2019/03/03/pyevn-pipenv初始化你需要的python环境/"><i class="fa fa-file-o"></i>pyevn+pipenv初始化你需要的python环境</a>
      </li>
    
      <li>
        <a href="/2019/02/18/Ansible模块中核心类（附执行剧本实例代码）/"><i class="fa fa-file-o"></i>Ansible模块中核心类（附执行剧本实例代码）</a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>Links</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="http://linuxops.cc" title="Macro博客" target="_blank" ]);">Macro博客</a></li>
	
		<li><i class="fa fa-github"></i><a href="http://www.uinion.com/" title="uinion小站" target="_blank" ]);">uinion小站</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->
	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2019 林文杰
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  
  <script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'ZP2ZSuHgipSZfRyU8uTR','2.0.0');
  </script>



  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'linuxunix' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
   </html>
